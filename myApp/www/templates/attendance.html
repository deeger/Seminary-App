<ion-view>
    <ion-nav-buttons side="left">
        <span class="buttons">
            <button menu-toggle="left"class="button button-icon icon ion-navicon"></button>
        </span>
    </ion-nav-buttons>
    <ion-nav-buttons>
        <button id="changePeriodBtn" ng-click='toggleExpanded(changePeriod) ' ng-show='Period' ng-class="{'ion-chevron-down' :!changePeriod.Expanded, 'ion-chevron-up': changePeriod.Expanded}" class='button center button-icon icon icon-right'>
            Period {{Period.periodNum}}
        </button>
    </ion-nav-buttons>

    <!--shows when change period button is clicked-->
    <ion-list id="changePeriod" ng-show="changePeriod.Expanded">
        <ion-item ng-repeat="period in periods"  ng-click="changePeriodClose(changePeriod)" ui-sref="app.attendance({periodId:period.periodNum})">
            Period {{period.periodNum}}
        </ion-item>
    </ion-list>

    <ion-header-bar class="dateNav bar-subheader bar-calm" ng-show="Period" na-title-slide-ios7>
        <button ng-click="previous()"  class="button prevBtn icon ion-arrow-left-c"></button>
        <h1 class="title">{{date | date:'EEE, dd MMM yyyy'}}</h1>
        <button ng-click="next()" class="button nextBtn icon ion-arrow-right-c"></button>
    </ion-header-bar><!--end date Nav-->

    <ion-content class="has-header">
        <!--when no period is chosen-->
        <ion-list id="pickPeriod" ng-show="!Period">
            <ion-item ng-repeat="period in periods" ui-sref="app.attendance({periodId:period.periodNum})">
                Period {{period.periodNum}}
            </ion-item>
        </ion-list>


        <div class="myStudents" ng-show="Period">
            <ion-list id="studentList" ng-show="Period">
                <ion-item ng-repeat="student in Period.students">
                    <div class="fName">{{student.firstName}}</div>
                    <div class="lName">{{student.lastName}}</div>
                    <div class="photo"><img src="{{student.picture}}" ></div>
                    <div class="percent">{{student.attPercent}}%</div>
                    <div class="year">{{student.schoolYear}}</div>
                    <div class="attMarker">
                        <div class="activeMark blank" ng-click="toggleMarkersExpanded(student.markers)" ng-bind-html="chosenMark">--</div>
                        <div class="markers" ng-show="student.markers.Expanded">
                            <span class="blank" ng-click="chooseMark('blank', student.markers)">--</span>
                            <span class="present" ng-click="chooseMark('present', student.markers)">P</span>
                            <!--<span class="madeUp" ng-click="chooseMark('madeUp', student.markers)">M</span>-->
                            <span class="unexcused" ng-click="chooseMark('unexcused', student.markers)">U</span>
                            <span class="tardy" ng-click="chooseMark('tardy', student.markers)">T</span>
                            <span class="parentExc" ng-click="chooseMark('parentExcused', student.markers)">PE</span>
                            <span class="schoolExc" ng-click="chooseMark('schoolExcused', student.markers)">SE</span>
                        </div><!--end .markers-->
                    </div><!--end .attMarker-->
                </ion-item>
            </ion-list>
        </div><!--end myStudents-->

    </ion-content>
</ion-view>